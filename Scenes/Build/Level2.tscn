[gd_scene load_steps=22 format=3 uid="uid://bofdbddgtahl4"]

[ext_resource type="Texture2D" uid="uid://p4cq0akituxu" path="res://Assets/skybox.png" id="1_kyvo3"]
[ext_resource type="PackedScene" uid="uid://bq7jj8c7sqndr" path="res://Prefabs/Player.tscn" id="2_fprf6"]
[ext_resource type="Texture2D" uid="uid://cmavs81v1lh6h" path="res://_Prototype/Dark/texture_01.png" id="3_vjguc"]
[ext_resource type="PackedScene" uid="uid://d3g1llkm5tfb0" path="res://Scenes/Models/Platform.tscn" id="4_4khld"]
[ext_resource type="PackedScene" uid="uid://rnp0uph34ikj" path="res://Scenes/Models/Keystone.tscn" id="5_b3ajr"]
[ext_resource type="PackedScene" uid="uid://bpeptod0bu0b" path="res://Scenes/Models/Keyhole.tscn" id="6_hkjy2"]
[ext_resource type="PackedScene" uid="uid://bfublhg2eklou" path="res://Prefabs/PuzzleElements/Box.tscn" id="7_1t21g"]
[ext_resource type="PackedScene" uid="uid://b00xs84c7ppsl" path="res://Prefabs/Laser/LaserBlaster.tscn" id="8_1e7e8"]
[ext_resource type="Script" path="res://Scripts/DeathPlane.cs" id="8_w2kfi"]
[ext_resource type="Script" path="res://Scripts/LaserBlaster.cs" id="9_bnfe7"]
[ext_resource type="PackedScene" uid="uid://dthp8c3eggmju" path="res://Prefabs/Laser/PlasmaBolt.tscn" id="10_vvl8g"]
[ext_resource type="Script" path="res://Scripts/PlasmaBolt.cs" id="11_y4011"]
[ext_resource type="AudioStream" uid="uid://c1fsn0od7m1n2" path="res://Sounds/77087__defunct3__laser-short.wav" id="12_vn1xh"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_1iwyd"]
panorama = ExtResource("1_kyvo3")

[sub_resource type="Sky" id="Sky_ce3p3"]
sky_material = SubResource("PanoramaSkyMaterial_1iwyd")

[sub_resource type="Environment" id="Environment_p3taq"]
background_mode = 2
sky = SubResource("Sky_ce3p3")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0hk5m"]
albedo_texture = ExtResource("3_vjguc")
uv1_triplanar = true

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_g8se5"]
friction = 0.0
bounce = 1.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_bf20a"]
albedo_color = Color(0.635294, 0, 0, 1)

[sub_resource type="BoxMesh" id="BoxMesh_p582r"]
material = SubResource("StandardMaterial3D_bf20a")
size = Vector3(100, 20, 100)

[sub_resource type="BoxShape3D" id="BoxShape3D_rmrxc"]
size = Vector3(100, 20, 100)

[node name="Level2" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_p3taq")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866024, -0.433016, 0.250001, 0, 0.499998, 0.866026, -0.500003, 0.749999, -0.43301, 0, 1.23619, 0)
shadow_enabled = true
shadow_opacity = 0.2

[node name="DirectionalLight3D2" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.954801, 0.257422, -0.148622, -1.95362e-08, 0.499998, 0.866026, 0.297245, -0.826883, 0.477399, 0, 1.23619, 0)
light_energy = 0.7
shadow_enabled = true
shadow_opacity = 0.2

[node name="Player" parent="." instance=ExtResource("2_fprf6")]
process_mode = 3
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 6.04145, 6.56821, -7)
collision_mask = 3
_sensitivity = 0.05

[node name="BoxRoom" type="CSGCombiner3D" parent="."]
material_override = SubResource("StandardMaterial3D_0hk5m")
use_collision = true

[node name="TheRats" type="CSGCombiner3D" parent="BoxRoom"]

[node name="CSGBox3D2" type="CSGBox3D" parent="BoxRoom/TheRats"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.30276, 2.55429, -6.55591)
size = Vector3(7.17407, 6.43625, 6.80816)

[node name="CSGBox3D8" type="CSGBox3D" parent="BoxRoom/TheRats"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 24.7792, 2.21984, -6.4618)
size = Vector3(17.4749, 6.57773, 6.9964)

[node name="CSGBox3D9" type="CSGBox3D" parent="BoxRoom/TheRats"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 25.8979, 0.476356, -6.22596)
size = Vector3(7.41422, 2.28038, 7.46808)

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="BoxRoom/TheRats"]

[node name="CSGBox3D9" type="CSGBox3D" parent="BoxRoom/TheRats/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16.8748, 7.62049, -0.440877)
size = Vector3(33.4862, 16.241, 5.98809)

[node name="CSGBox3D10" type="CSGBox3D" parent="BoxRoom/TheRats/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.89931, 1.08142, -8.58259)
operation = 2
size = Vector3(38.8607, 5.76392, 9.40461)

[node name="RubberRoom" type="CSGCombiner3D" parent="BoxRoom"]

[node name="RubberRoomWithRats" type="CSGBox3D" parent="BoxRoom/RubberRoom"]
transform = Transform3D(4.04641, 0, 0, 0, 1, 0, 0, 0, 3.41991, 20.9295, -0.245152, 3.58642)
size = Vector3(10.8605, 0.5, 13)

[node name="Negative" type="CSGBox3D" parent="BoxRoom/RubberRoom"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 13.0956, -2.13888, -6.6799)
operation = 2
size = Vector3(6.46362, 6, 7.30714)

[node name="CornerLava" type="CSGBox3D" parent="BoxRoom/RubberRoom"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 37.8991, 1.01093, -3.8622)
operation = 2
size = Vector3(9.20773, 6, 12.9425)

[node name="RatsMakeMeCrazy" type="CSGCombiner3D" parent="BoxRoom/RubberRoom"]

[node name="CSGBox3D8" type="CSGBox3D" parent="BoxRoom/RubberRoom/RatsMakeMeCrazy"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 15.1809, 7.87519, 25.6286)
size = Vector3(31.5609, 15.8047, 2.413)

[node name="CSGBox3D3" type="CSGBox3D" parent="BoxRoom/RubberRoom/RatsMakeMeCrazy"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 27.4487, 7.61092, -10.5)
size = Vector3(56.1025, 16.2218, 3)

[node name="CSGBox3D4" type="CSGBox3D" parent="BoxRoom/RubberRoom/RatsMakeMeCrazy"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.841067, 7.64462, 7.22467)
size = Vector3(3, 16.2893, 35.4493)

[node name="CSGBox3D5" type="CSGBox3D" parent="BoxRoom/RubberRoom/RatsMakeMeCrazy"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 41.3362, 7.78857, 7.77805)
size = Vector3(3, 16.5771, 38)

[node name="CSGBox3D7" type="CSGBox3D" parent="BoxRoom/RubberRoom/RatsMakeMeCrazy"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 36.7004, 3.29999, 24.3158)
size = Vector3(7.20502, 7.59998, 5)

[node name="CSGBox3D6" type="CSGBox3D" parent="BoxRoom/RubberRoom/RatsMakeMeCrazy"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 31.3879, 5.04823, 14.0937)
size = Vector3(25.4878, 11.0965, 3.95357)

[node name="CSGBox3D2" type="CSGBox3D" parent="BoxRoom"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.60732, 0.642187)
size = Vector3(1, 1, 3.88574)

[node name="Elements" type="Node3D" parent="."]

[node name="Platform" parent="Elements" instance=ExtResource("4_4khld")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 36.438, 4.30326, 9.36024)
collision_mask = 2
gravity_scale = 0.5
_spawnPos = Vector3(36.438, 4.303, 9.36)

[node name="Platform2" parent="Elements" instance=ExtResource("4_4khld")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 36.438, 4.96818, 13.3602)
collision_mask = 2
gravity_scale = 0.5
_spawnPos = Vector3(36.438, 4.968, 13.36)

[node name="Platform3" parent="Elements" instance=ExtResource("4_4khld")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 36.438, 5.59958, 17.3602)
collision_mask = 2
gravity_scale = 0.5
_spawnPos = Vector3(36.438, 5.6, 17.36)

[node name="Platform5" parent="Elements" instance=ExtResource("4_4khld")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 36.438, 6.21326, 20.1271)
collision_mask = 2
gravity_scale = 0.5
_spawnPos = Vector3(36.438, 6.213, 20.127)

[node name="Platform4" parent="Elements" instance=ExtResource("4_4khld")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 35.1787, 10.9155, 24.9505)
collision_mask = 2
gravity_scale = 0.5
_spawnPos = Vector3(35.179, 10.915, 24.95)

[node name="Keystone" parent="Elements" instance=ExtResource("5_b3ajr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 31.9675, 11.7565, 14.7728)
_spawnPos = Vector3(34.585, 8.32, 22.983)

[node name="Keyhole" parent="Elements" instance=ExtResource("6_hkjy2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 19.0386, 0.437831, 13.2521)

[node name="Box" parent="Elements" instance=ExtResource("7_1t21g")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14.0589, 5.5646, -8.04518)
physics_material_override = SubResource("PhysicsMaterial_g8se5")
_spawnPos = Vector3(14.059, 5.565, -8.045)

[node name="LaserBlaster" parent="Elements" instance=ExtResource("8_1e7e8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 31.2619, 10.711, 5.89933)
script = ExtResource("9_bnfe7")

[node name="TurretMesh" parent="Elements/LaserBlaster" index="0"]
transform = Transform3D(0.08, 0, 0, 0, 0.08, 0, 0, 0, 0.08, 0, 0, 0)

[node name="CollisionShape3D" parent="Elements/LaserBlaster" index="1"]
transform = Transform3D(0.08, 0, 0, 0, 0.08, 0, 0, 0, 0.08, -0.00695801, 0.995491, 0.360252)

[node name="PlasmaBolt" parent="Elements/LaserBlaster" instance=ExtResource("10_vvl8g")]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 1.08296, 2.45892)
script = ExtResource("11_y4011")

[node name="SoundLaser" type="AudioStreamPlayer3D" parent="Elements/LaserBlaster/PlasmaBolt"]
stream = ExtResource("12_vn1xh")
volume_db = -14.414

[node name="DeathPlane" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 28.9754, -10.1722, 0)
mesh = SubResource("BoxMesh_p582r")
skeleton = NodePath("Area3D")

[node name="Area3D" type="Area3D" parent="DeathPlane"]
collision_mask = 3
script = ExtResource("8_w2kfi")

[node name="CollisionShape3D" type="CollisionShape3D" parent="DeathPlane/Area3D"]
shape = SubResource("BoxShape3D_rmrxc")

[connection signal="body_entered" from="Elements/LaserBlaster/PlasmaBolt" to="Elements/LaserBlaster/PlasmaBolt" method="OnPlayerEntered"]

[editable path="Elements/LaserBlaster"]
[editable path="Elements/LaserBlaster/PlasmaBolt"]
